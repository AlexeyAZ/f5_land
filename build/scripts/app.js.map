{"version":3,"sources":["app.js"],"names":["$","body","thanksLocation","length","rangeslider","polyfill","webshim","setOptions","lazyCustomMessages","replaceValidationUI","phoneLink","md","MobileDetect","window","navigator","userAgent","mobile","attr","data","removeClass","addClass","name","inputmask","greedy","clearIncomplete","on","e","preventDefault","self","target","hasClass","location","wl","callbacks","onFormSubmit","$form","res","status","smallFormHandler","def","submit","formData","serialize","ajax","type","url","success","text","localStorage","getItem","form","selfName","find","selfPhone","selfEmail","val","setItem"],"mappings":"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","file":"app.js","sourcesContent":["$(function() {\r\n\r\n    var body = $(\"body\");\r\n    var thanksLocation = \"thanks.html\";\r\n\r\n    if ($('input[type=\"range\"]').length) {\r\n        $('input[type=\"range\"]').rangeslider({\r\n            polyfill: false,\r\n        });\r\n    };\r\n\r\n    webshim.setOptions('forms', {\r\n        lazyCustomMessages: true,\r\n        replaceValidationUI: true\r\n    });\r\n    webshim.polyfill('forms');\r\n\r\n    function phoneLink() {\r\n        var md = new MobileDetect(window.navigator.userAgent);\r\n        var phoneLink = $(\"[data-phone]\");\r\n\r\n        if (md.mobile()) {\r\n            phoneLink.attr(\"href\", \"tel:\" + $(\".phone-link\").data(\"phone\"));\r\n            phoneLink.removeClass(\"js-small-btn\");\r\n        } else {\r\n            phoneLink.attr(\"href\", \"\");\r\n            phoneLink.addClass(\"js-small-btn\");\r\n        }\r\n    };\r\n    phoneLink();\r\n\r\n    // form handler\r\n    var name;\r\n\r\n    $(\"input[name=phone]\").inputmask({\r\n        \"mask\": \"+9(999)999-9999\",\r\n        greedy: false,\r\n        clearIncomplete: true\r\n    });\r\n\r\n    body.on(\"click\", \".js-small-btn\", function(e) {\r\n        e.preventDefault();\r\n\r\n        if (!$(\".thanks\").length) {\r\n            $(\"html\").addClass(\"form-open\");\r\n            $(\".form-wrap_small\").addClass(\"form-wrap_open\");\r\n        }\r\n    });\r\n\r\n    body.on(\"click\", function(e) {\r\n        var self = $(e.target);\r\n        \r\n        if (self.hasClass(\"form-wrap_small\") || self.hasClass(\"form__close\")){\r\n            $(\"html\").removeClass(\"form-open\");\r\n            $(\".form-wrap\").removeClass(\"form-wrap_open\");\r\n        } else if(self.hasClass(\"form-wrap_big\")) {\r\n            location = thanksLocation;\r\n        }\r\n    });\r\n\r\n    if (typeof wl != \"undefined\") {\r\n        wl.callbacks.onFormSubmit = function ($form, res) {\r\n            if ($form.data('next')) {\r\n            \r\n                if(res.status == 200) {\r\n                    smallFormHandler($form);\r\n                } else {  \r\n                    wl.callbacks.def.onFormSubmit($form, res);\r\n                }\r\n            } else {\r\n                location = thanksLocation;\r\n            }\r\n        };\r\n    } else {\r\n        $(\"#smallForm, #bottomForm\").submit(function(e) {\r\n            e.preventDefault();\r\n            var self = $(this);\r\n            \r\n            smallFormHandler(self);\r\n        });\r\n\r\n        $(\"#bigForm\").submit(function(e) {\r\n            e.preventDefault();\r\n\r\n            var self = $(this);\r\n            var formData = self.serialize();\r\n\r\n            $.ajax({\r\n                type: \"POST\",\r\n                url: \"php/sendpresent.php\",\r\n                data: formData,\r\n                success: function(data) {\r\n                    location = thanksLocation;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    if ($(\"#thanksName\").length) {\r\n        $(\"#thanksName\").text(localStorage.getItem(\"landclientname\"));\r\n    };\r\n\r\n    function smallFormHandler(form) {\r\n\r\n        $(\".form-wrap_open\").removeClass(\"form-wrap_open\");\r\n        $(\".form-wrap_big\").addClass(\"form-wrap_open\");\r\n        $(\"html\").addClass(\"form-open\");\r\n\r\n        var selfName = form.find(\"input[name=name]\");\r\n        var selfPhone = form.find(\"input[name=phone]\");\r\n        var selfEmail = form.find(\"input[name=email]\");\r\n        var formData = form.serialize();\r\n\r\n        name = selfName.val();\r\n\r\n        $(\"[name=name1]\").val(selfName.val());\r\n        $(\"[name=phone1]\").val(selfPhone.val());\r\n        $(\"[name=email1]\").val(selfEmail.val());\r\n\r\n\r\n        $.ajax({\r\n            type: \"POST\",\r\n            url: \"php/send.php\",\r\n            data: formData\r\n        });\r\n\r\n        if (name) {\r\n            localStorage.setItem(\"landclientname\", name + \", наши\");\r\n        } else {\r\n            localStorage.setItem(\"landclientname\", \"Наши\");\r\n        }\r\n    }\r\n});"]}